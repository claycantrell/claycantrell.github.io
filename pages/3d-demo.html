<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>3D Interactive Demo</title>
    <link rel="stylesheet" href="../assets/css/3d-demo.css">
</head>

<body>
    <div id="notification"></div>
    <img id="audio-icon" src="https://img.icons8.com/ios-glyphs/30/ffffff/mute.png" alt="Audio Icon">

    <!-- Instructional Message -->
    <div id="instruction-message">
        <p id="instructions">
            <!-- Instructions will be populated by JavaScript -->
        </p>
    </div>

    <!-- Exit Button -->
    <button id="exit-button">Go Home</button>

    <!-- Chat System (RuneScape style) -->
    <div id="chat-container">
        <div id="chat-toggle">Chat</div>
        <div id="chat-box" class="chat-closed">
            <div id="chat-messages"></div>
            <div id="chat-input-container">
                <input type="text" id="chat-input" placeholder="Type a message..." maxlength="100">
            </div>
        </div>
    </div>

    <!-- Import map to resolve 'three' module for ES6 imports -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.module.js",
            "three/addons/": "https://threejs.org/examples/jsm/"
        }
    }
    </script>
    
    <!-- Include Three.js library from CDN (UMD build for global THREE) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Noise library for terrain generation -->
    <script src="https://cdn.jsdelivr.net/npm/simplex-noise@2.4.0/simplex-noise.js"></script>

    <!-- Include FontLoader and TextGeometry as ES6 modules and make them available globally -->
    <script type="module">
        // Use threejs.org examples CDN with import map for 'three' dependency
        import { FontLoader } from 'https://threejs.org/examples/jsm/loaders/FontLoader.js';
        import { TextGeometry } from 'https://threejs.org/examples/jsm/geometries/TextGeometry.js';
        // Make them available globally on THREE namespace
        window.THREE.FontLoader = FontLoader;
        window.THREE.TextGeometry = TextGeometry;
        // Signal that modules are loaded
        window.THREE_MODULES_LOADED = true;
        // Dispatch event to notify other scripts
        window.dispatchEvent(new Event('threeModulesLoaded'));
    </script>

    <!-- 3D Demo JavaScript Modules (load order is important) -->
    <script src="../assets/js/demos/3d-demo/performance.js"></script>
    <script src="../assets/js/demos/3d-demo/character.js"></script>
    <script src="../assets/js/demos/3d-demo/world.js"></script>
    <script src="../assets/js/demos/3d-demo/npc.js"></script>
    <script src="../assets/js/demos/3d-demo/core.js"></script>
    <script src="../assets/js/demos/3d-demo/controls.js"></script>
    <script src="../assets/js/demos/3d-demo/audio.js"></script>
    <script src="../assets/js/demos/3d-demo/ui.js"></script>
    <script src="../assets/js/demos/3d-demo/chat.js"></script>
    <script src="../assets/js/demos/3d-demo/multiplayer.js"></script>
    <script src="../assets/js/demos/3d-demo/other-players.js"></script>
    <script src="../assets/js/demos/3d-demo/game.js"></script>

    <!-- White Overlay for fade-out effect -->
    <div id="white-overlay"></div>
</body>

</html>
