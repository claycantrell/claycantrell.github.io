import{L as e,F as t,S as s,E as r,T as o}from"./three-DiX2_aTt.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let i=class{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,s){return e[0]*t+e[1]*s}dot3(e,t,s,r){return e[0]*t+e[1]*s+e[2]*r}dot4(e,t,s,r,o){return e[0]*t+e[1]*s+e[2]*r+e[3]*o}noise(e,t){let s,r,o;const i=(e+t)*(.5*(Math.sqrt(3)-1)),n=Math.floor(e+i),a=Math.floor(t+i),l=(3-Math.sqrt(3))/6,c=(n+a)*l,h=e-(n-c),d=t-(a-c);let m,u;h>d?(m=1,u=0):(m=0,u=1);const p=h-m+l,f=d-u+l,y=h-1+2*l,g=d-1+2*l,j=255&n,w=255&a,b=this.perm[j+this.perm[w]]%12,M=this.perm[j+m+this.perm[w+u]]%12,v=this.perm[j+1+this.perm[w+1]]%12;let E=.5-h*h-d*d;E<0?s=0:(E*=E,s=E*E*this.dot(this.grad3[b],h,d));let T=.5-p*p-f*f;T<0?r=0:(T*=T,r=T*T*this.dot(this.grad3[M],p,f));let x=.5-y*y-g*g;return x<0?o=0:(x*=x,o=x*x*this.dot(this.grad3[v],y,g)),70*(s+r+o)}noise3d(e,t,s){let r,o,i,n;const a=(e+t+s)*(1/3),l=Math.floor(e+a),c=Math.floor(t+a),h=Math.floor(s+a),d=1/6,m=(l+c+h)*d,u=e-(l-m),p=t-(c-m),f=s-(h-m);let y,g,j,w,b,M;u>=p?p>=f?(y=1,g=0,j=0,w=1,b=1,M=0):u>=f?(y=1,g=0,j=0,w=1,b=0,M=1):(y=0,g=0,j=1,w=1,b=0,M=1):p<f?(y=0,g=0,j=1,w=0,b=1,M=1):u<f?(y=0,g=1,j=0,w=0,b=1,M=1):(y=0,g=1,j=0,w=1,b=1,M=0);const v=u-y+d,E=p-g+d,T=f-j+d,x=u-w+2*d,k=p-b+2*d,L=f-M+2*d,S=u-1+.5,q=p-1+.5,C=f-1+.5,O=255&l,P=255&c,A=255&h,F=this.perm[O+this.perm[P+this.perm[A]]]%12,N=this.perm[O+y+this.perm[P+g+this.perm[A+j]]]%12,z=this.perm[O+w+this.perm[P+b+this.perm[A+M]]]%12,B=this.perm[O+1+this.perm[P+1+this.perm[A+1]]]%12;let D=.6-u*u-p*p-f*f;D<0?r=0:(D*=D,r=D*D*this.dot3(this.grad3[F],u,p,f));let H=.6-v*v-E*E-T*T;H<0?o=0:(H*=H,o=H*H*this.dot3(this.grad3[N],v,E,T));let _=.6-x*x-k*k-L*L;_<0?i=0:(_*=_,i=_*_*this.dot3(this.grad3[z],x,k,L));let I=.6-S*S-q*q-C*C;return I<0?n=0:(I*=I,n=I*I*this.dot3(this.grad3[B],S,q,C)),32*(r+o+i+n)}noise4d(e,t,s,r){const o=this.grad4,i=this.simplex,n=this.perm,a=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20;let c,h,d,m,u;const p=(e+t+s+r)*a,f=Math.floor(e+p),y=Math.floor(t+p),g=Math.floor(s+p),j=Math.floor(r+p),w=(f+y+g+j)*l,b=e-(f-w),M=t-(y-w),v=s-(g-w),E=r-(j-w),T=(b>M?32:0)+(b>v?16:0)+(M>v?8:0)+(b>E?4:0)+(M>E?2:0)+(v>E?1:0),x=i[T][0]>=3?1:0,k=i[T][1]>=3?1:0,L=i[T][2]>=3?1:0,S=i[T][3]>=3?1:0,q=i[T][0]>=2?1:0,C=i[T][1]>=2?1:0,O=i[T][2]>=2?1:0,P=i[T][3]>=2?1:0,A=i[T][0]>=1?1:0,F=i[T][1]>=1?1:0,N=i[T][2]>=1?1:0,z=i[T][3]>=1?1:0,B=b-x+l,D=M-k+l,H=v-L+l,_=E-S+l,I=b-q+2*l,R=M-C+2*l,G=v-O+2*l,X=E-P+2*l,$=b-A+3*l,J=M-F+3*l,K=v-N+3*l,U=E-z+3*l,W=b-1+4*l,Q=M-1+4*l,V=v-1+4*l,Y=E-1+4*l,Z=255&f,ee=255&y,te=255&g,se=255&j,re=n[Z+n[ee+n[te+n[se]]]]%32,oe=n[Z+x+n[ee+k+n[te+L+n[se+S]]]]%32,ie=n[Z+q+n[ee+C+n[te+O+n[se+P]]]]%32,ne=n[Z+A+n[ee+F+n[te+N+n[se+z]]]]%32,ae=n[Z+1+n[ee+1+n[te+1+n[se+1]]]]%32;let le=.6-b*b-M*M-v*v-E*E;le<0?c=0:(le*=le,c=le*le*this.dot4(o[re],b,M,v,E));let ce=.6-B*B-D*D-H*H-_*_;ce<0?h=0:(ce*=ce,h=ce*ce*this.dot4(o[oe],B,D,H,_));let he=.6-I*I-R*R-G*G-X*X;he<0?d=0:(he*=he,d=he*he*this.dot4(o[ie],I,R,G,X));let de=.6-$*$-J*J-K*K-U*U;de<0?m=0:(de*=de,m=de*de*this.dot4(o[ne],$,J,K,U));let me=.6-W*W-Q*Q-V*V-Y*Y;return me<0?u=0:(me*=me,u=me*me*this.dot4(o[ae],W,Q,V,Y)),27*(c+h+d+m+u)}};class n{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const s=[],r=function(e,t,s){const r=Array.from(e),o=t/s.resolution,i=(s.boundingBox.yMax-s.boundingBox.yMin+s.underlineThickness)*o,n=[];let l=0,c=0;for(let h=0;h<r.length;h++){const e=r[h];if("\n"===e)l=0,c-=i;else{const t=a(e,o,l,c,s);l+=t.offsetX,n.push(t.path)}}return n}(e,t,this.data);for(let o=0,i=r.length;o<i;o++)s.push(...r[o].toShapes());return s}}function a(e,t,r,o,i){const n=i.glyphs[e]||i.glyphs["?"];if(!n)return;const a=new s;let l,c,h,d,m,u,p,f;if(n.o){const e=n._cachedOutline||(n._cachedOutline=n.o.split(" "));for(let s=0,i=e.length;s<i;){switch(e[s++]){case"m":l=e[s++]*t+r,c=e[s++]*t+o,a.moveTo(l,c);break;case"l":l=e[s++]*t+r,c=e[s++]*t+o,a.lineTo(l,c);break;case"q":h=e[s++]*t+r,d=e[s++]*t+o,m=e[s++]*t+r,u=e[s++]*t+o,a.quadraticCurveTo(m,u,h,d);break;case"b":h=e[s++]*t+r,d=e[s++]*t+o,m=e[s++]*t+r,u=e[s++]*t+o,p=e[s++]*t+r,f=e[s++]*t+o,a.bezierCurveTo(m,u,p,f,h,d)}}}return{offsetX:n.ha*t,path:a}}const l="localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname;window.onerror=function(e,t,s,r,o){if(l){const e=document.getElementById("notification");e&&(e.textContent="An error occurred. Please refresh the page.",e.style.display="block")}return!1},window.onunhandledrejection=function(e){},window.gameLog=l?()=>{}:function(){}.bind();window.THREE={...o,FontLoader:class extends e{constructor(e){super(e)}load(e,s,r,o){const i=this,n=new t(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,function(e){const t=i.parse(JSON.parse(e));s&&s(t)},r,o)}parse(e){return new n(e)}},TextGeometry:class extends r{constructor(e,t={}){const s=t.font;if(void 0===s)super();else{const r=s.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}},window.SimplexNoise=class extends i{constructor(e){super("string"==typeof e?function(e){let t=0;for(let s=0;s<e.length;s++)t=Math.imul(31,t)+e.charCodeAt(s)|0;return{random:()=>(t=Math.imul(t^t>>>16,2246822507),t=Math.imul(t^t>>>13,3266489909),((t^=t>>>16)>>>0)/4294967296)}}(e):e)}noise2D(e,t){return this.noise(e,t)}},window.THREE_MODULES_LOADED=!0,window.dispatchEvent(new Event("threeModulesLoaded"));const c=["../engine/namespace.js","../engine/systems.js","../engine/config.js","../engine/performance.js","../engine/utils/random.js","../maps/map-loader.js","../systems/character.js","../systems/climate.js","../systems/biomes.js","../systems/water.js","../systems/chunks.js","../systems/terrain.js","../systems/trees.js","../systems/shrubs.js","../systems/portals.js","../systems/entities/npc.js","../systems/entities/deer.js","../systems/entities/bunny.js","../systems/entities/bird.js","../systems/entities/entity-registry.js","../multiplayer/player-utils.js","../multiplayer/time-sync.js","../multiplayer/sync.js","../engine/input.js","../engine/audio.js","../engine/ui.js","../systems/chat.js","../multiplayer/client.js","../multiplayer/other-players.js","../systems/building.js","../maps/map-menu.js","../engine/core.js","../engine/game.js"];function h(e,t=1e4){return new Promise((s,r)=>{const o=document.createElement("script");o.src=e;const i=setTimeout(()=>{r(new Error(`Script load timeout: ${e}`))},t);o.onload=()=>{clearTimeout(i),s()},o.onerror=()=>{clearTimeout(i),r(new Error(`Failed to load script: ${e}`))},document.body.appendChild(o)})}!async function(){try{for(const e of c)await h(e);gameLog("All game scripts loaded")}catch(e){const t=document.getElementById("notification");t&&(t.textContent="Failed to load game. Please refresh the page.",t.style.display="block",t.style.background="rgba(200, 0, 0, 0.8)")}}();
